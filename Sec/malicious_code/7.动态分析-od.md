

## OD 基础

[metasploit-framework](https://github.com/rapid7/metasploit-framework)
[shellcode](https://github.com/rapid7/metasploit-framework/blob/master/external/source/shellcode/windows/x86/src/block/block_api.asm)

hash算法搜索获得api函数地址的实现
+ [文章1](https://www.cnblogs.com/bokernb/p/6407484.html)
+ [文章2](https://bbs.pediy.com/thread-86216.htm)

如何判断恶意样本中是否采用 hash 算法搜索获得api函数地址的方式进行系统API的调用?
有很多以**立即数** 为基础来做一些循环和偏移.



因为一般是拿 指针,寄存器来操作 很少有以立即数为基础来做一些循环和偏移

明确我们的使用目的:
> 在恶意样本分析中,我们使用od通常都是用来补充一些详细信息或者是寻找一些特殊的东西

### 动态看得到的有哪些?
堆栈具体的值

### 基本使用

结合 IDA 

+ 地址的问题
	00401093 <font color=red>一般来说直接对应IDA地址和OD地址的后四位就行</font>
	+ 如果是 **0040** 开头的话,就直接看后面四位
	+ 如果不是 **0040** 开头,比如 0041 那就用前四位加一即可 (**0034**0000 + 10000) 
> 在 win7 里面 IDA 的地址完全对应 OD 里面的地址


![Snipaste_20220420_173906.png](http://zhouhao-blog.oss-cn-shanghai.aliyuncs.com/articles/bb2a1720808adee7f917545636168a34.png)
	

![Snipaste_20220420_180439.png](http://zhouhao-blog.oss-cn-shanghai.aliyuncs.com/articles/df631d59359bd664a0dac33e250246af.png)


+ **下断点**

	+ 使用快捷键 <kbd>F2</kbd> ( 如果成功设下断点, OD 地址处的颜色会变红)
	+ 或右键对应指令处选择 断点 --> 切换 进行设置普通断点,

+ 运行到断点处
	+ 使用快捷键 <kbd>F4</kbd> ( 如果成功运行到断点处, OD地址处的颜色会变灰)
	+ 或右键选择 断点 --> 运行到指定位置

+ 指令执行方式
	+ 单步步入: 快捷键 <kbd>F7</kbd>
	<font color=green>使用场景: 运行的汇编代码中有 `call` 如果想看 `call` 的函数的具体代码,就使用 <kbd>F7</kbd></font>
	+ 单步步过: 快捷键 <kbd>F8</kbd>
	<font color=green>使用场景: 运行的汇编代码中没有 `call` 或者你不想看函数的中间过程,就使用 <kbd>F8</kbd></font>
	+ 自动步过: 快捷键 <kbd>Ctrl</kbd> + <kbd>F8</kbd>
	<font color=green>使用场景: 循环语句,经常和 <kbd>F12</kbd> (暂停) 一起使用 </font>

快速找到内存中的值

![Snipaste_20220421_014532.png](http://zhouhao-blog.oss-cn-shanghai.aliyuncs.com/articles/3915d0f6483ea0321d2e7f316cd74de0.png)

